{"workflow":{"name":"GateEntryProc","verdis_version":"1.0"},"trigger":{"name":"StartGateEntry","trigger_task":"TruckDocColl"},"task":[{"name":"TruckDocColl","code":"// code\nvar StoreID = await this.frameworkObjectService.create(\"Truck_Document\", Obj.data);\nObj.Transaction_Obj = await this.verdis_transaction.addReferences({\n                        \"object_type\": \"truck_documents\",\n                        \"object_uuid\": StoreID.ID\n                }, Obj.Transaction_Obj.uuid);","dequeue_from":"TruckatGate","enqueue_to":"DocToDo"},{"name":"DocVeri","code":"// code\nvar TruckDocID = Obj.Transaction_Obj.references[0][\"object_uuid\"];\nvar StoreDetailID = Obj.data.StoreID;\n\nvar TruckDoc = await this.frameworkObjectService.get('Truck_Document', {\"ID\": TruckDocID});\nvar StoreDetail = await this.frameworkObjectService.get('Store_Details', {\"ID\": StoreDetailID});\n                \nif(TruckDoc.Client != StoreDetail.Name || TruckDoc.Shipped_To != StoreDetail.Location){\n                        console.log(\"Document Invalid, Please resubmit Documents\");\n                        return;\n                }","dequeue_from":"DocToDo","enqueue_to":"NowPark"},{"name":"AllotParkSlot","code":"// Code\nvar TruckDocID = Obj.Transaction_Obj.references[0][\"object_uuid\"];\nvar TruckDoc = await this.frameworkObjectService.get('Truck_Document', {\"ID\": TruckDocID});\nvar Gate_EntryDoc = await this.frameworkObjectService.create(\"Gate_Entry\", {\"Vehicle_no\": TruckDoc.Truck_no, \"Parking_Slot\": Obj.data.PS_gate_entry});\nObj.Transaction_Obj = await this.verdis_transaction.addReferences({\n                        \"object_type\": \"Gate_Entry\",\n                        \"object_uuid\": Gate_EntryDoc.ID\n                }, Obj.Transaction_Obj.uuid);","dequeue_from":"NowPark","enqueue_to":""}]}